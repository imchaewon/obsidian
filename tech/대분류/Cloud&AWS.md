클라우드 컴퓨팅이란

서버, 스토리지, 네트워크, SW 등 자원이 필요할 때 네트워크롤 통해 어디서든 접근 가능한 서비스 형태로 제공받아 이용하는 방식

이때 클라우드공급자는 가상화기술을 사용함

------------------------------

가상화 기술(Virtualization)이란

하나의 컴퓨터를 여러개처럼 활용하거나, 여러 컴퓨터를 하나처럼 관리하는 기술

가상화를 이용하면 서버를 통합하고 서버의 자원을 최대한으로 활용함으로써 서버 과부하를 해결할 수 있음


가상화의 장점

1개의 하드웨어 상에서 여러개의 가상머신(VM)을 구동할 수 있음
하드웨어와 무관하게 원하는 운영체제나 그에 맞는 애플리케이션을 실행할 수 있음
어떠한 시스템에서도 가상머신이 프로비저닝될 수 있음

------------------------------





----------------------------------------------------------------------------------------------------

OpenStack

클라우드 컴퓨팅 인프라를 구축하고 관리하기 위한 오픈소스 소프트웨어 플랫폼

주로 프라이빗 클라우드 및 하이브리드 클라우드 환경에서 사용됨

오픈스택으로 다양한 컴퓨팅, 스토리지 및 네트워킹 리소스를 가상화하고 제어할 수 있고
대규모 데이터센터 및 클라우드 환경을 구축하는 데 사용됨


OpenStack의 구성요소

Nova: Nova는 컴퓨팅 서비스로서 가상 머신(VM) 관리와 스케일링을 담당합니다. 이를 통해 가상 머신을 프로비저닝하고 관리할 수 있습니다.

Swift: Swift는 객체 스토리지 서비스로 대용량 데이터를 저장하고 검색하는 데 사용됩니다. 대규모 데이터 저장소를 위한 확장 가능한 솔루션을 제공합니다.

Cinder: Cinder는 블록 스토리지 서비스로 가상 머신에 연결할 수 있는 블록 스토리지를 제공합니다. 이를 통해 추가 스토리지를 동적으로 할당할 수 있습니다.

Neutron: Neutron은 네트워킹 서비스로 가상 네트워크 및 네트워크 구성을 관리합니다. 이를 사용하여 가상 머신 간 및 외부 네트워크 간의 연결을 설정할 수 있습니다.

Horizon: Horizon은 OpenStack의 웹 대시보드로, 사용자가 가상 머신 및 리소스를 그래픽 인터페이스를 통해 관리할 수 있습니다.

Keystone: Keystone은 OpenStack 환경의 인증 및 인가 서비스로, 사용자 및 리소스의 식별, 권한 부여 및 인증을 관리합니다.

Glance: Glance는 가상 머신 이미지를 관리하는 이미지 서비스로, 가상 머신 이미지를 업로드, 다운로드 및 공유할 수 있습니다.

Heat: Heat는 오케스트레이션 서비스로, 템플릿 기반의 인프라 및 애플리케이션 스택을 자동으로 배포 및 관리할 수 있습니다

----------------------------------------------------------------------------------------------------

OpenStack / VMware 차이

VMware
- 상용 가상화 및 클라우드 솔루션으로, 라이선스 비용이 매우 높음

오픈스택
- 오픈스택은 오픈 소스로 제공되는 클라우드 플랫폼이므로 라이선스 비용이 없음

----------------------------------------------------------------------------------------------------

스케일 업 / 다운

컴퓨팅 자원을 수직적 으로 증가시키거나 감소시키는것

-----

스케일 업(Scale-Up)

기존 서버 또는 가상머신의 하드웨어 리소스를 더 높은 성능 or 더 많은 리소스로 업그레이드 하는 것
단일 서버 또는 인스턴스의 성능을 향상시키는 방법중 하나로 CPU, RAM, 디스크 공간 등을 추가하거나 업그레이드하는것을 의미함

-----

스케일 다운(Scale-Down)

기존 서버 또는 가상 머신의 하드웨어 리소스를 줄이는 것
불필요한 리소스 사용을 최소화하거나 비용을 절감하기 위해 사용되며, 리소스를 축소하거나 하드웨어를 낮은 성능으로 변경하는 것을 포함함

------------------------------

스케일 인 / 아웃

컴퓨팅 자원을 수평적으로 증가시키거나 감소시키는 것

-----

스케일 인(Scale-In)

컴퓨팅 리소스나 서버 인스턴스의 수를 감소시키는것
트래픽이 감소하거나 자원이 더이상 필요하지 않을 때 사용되며, 비용을 절감하고 자원 사용률 최적화를 가능하게 함

-----

스케일 아웃(Scale-out)

컴퓨팅 리소스나 서버 인스턴스의 수를 증가시키는것
트래픽이 증가하거나 더 많은 자원이 필요할때 사용되며, 성능을 향상시키고 부하 분산을 가능하게 함

----------------------------------------------------------------------------------------------------

[[클라우드 서비스]] 종류

-----

컴퓨팅 서비스 : 가상 컴퓨터(가상 머신)를 제공하는 서비스

물리적 서버를 데이터 센터에 배치하고 각 물리적 서버에 여러 개의 가상머신(인스턴스)를 실행할 수 있음
이런 물리적 서버를 AWS에서 "호스트" 라고 함

필요에 따라 컴퓨터를 프로비저닝(시스템이나 서비스를 사용자 요구에 맞게 사전에 구성하여 사용할 수 있도록 준비하는 것)하고 관리할 수 있음

ex) Amazon EC2, Google Compute Engine, Microsoft Azure Virtual Machines

-----

객체 스토리지 서비스 : 파일 단위가 아닌 객체 단위로 데이터를 저장하는 서비스

각 객체는 고유한 식별자를 가지고 있으며, 이를 통해 데이터에 접근함
객체 스토리지는 파일 시스템과 달리 디렉토리 구조가 없으며, 폴더 대신 버킷 또는 컨테이너라고 불리는 공간에 객체를 저장함

대용량의 미디어파일, 이미지, 동영상, 문서 등을 저장하거나 CDN(Content Deilivery Network)에 사용하는 데 적합함

ex) Amazon S3, Google Cloud Storage, Microsoft Azure Blob Storage

-----

블록 스토리지 서비스 : 블록 스토리지를 이용한 서비스

블록 스토리지란?
데이터를 블록 단위로 저장하고 관리하는 방식
애플리케이션 실행에 필요한 데이터, 운영체제, DB 등을 저장하는데 사용됨
각각의 블록은 고유한 식별자를 가지고 있음
데이터를 빠르게 읽고 쓸 수 있으며, 데이터의 일부분만 읽고 쓸 수 있어서 효율적인 데이터 관리가 가능함
일반적으로 사용자가 직접 블록을 관리하는 것이 아니라 컴퓨터 또는 스토리지 시스템이 블록을 관리해줌

ex) Amazon EBS

-----

파일 스토리지 서비스 : 데이터를 파일 형식으로 저장하고 관리하는 서비스

주로 네트워크 연결된 서버와 클라이언트 간에 파일을 공유하는 데 사용됨

ex) Amazon EFS, Google Cloud Filestore, Microsoft Azure Files

-----

메모리 캐싱 서비스 : 데이터의 빠른 엑세스를 위해 데이터를 메모리에 저장하는 서비스

데이터베이스나 다른 데이터 소스로부터 데이터를 가져와 메모리에 캐싱하여 반복적인 액세스 시간을 줄이고 성능을 향상시킴

ex) Amazon ElastiCache, Redis, Memcached

-----

데이터 데이스 서비스 : 구조화된 데이터의 저장, 관리, 검색을 위한 서비스

테이블 형식으로 데이터를 구성하고 SQL 또는 NoSQL 쿼리를 사용하여 데이터에 접근함

ex) Amazon RDS, Google Cloud SQL, Microsoft Azure SQL Database, MongoDB Atlas

-----

컨테이너 서비스 : 컨테이너 기반의 애플리케이션 배포와 관리를 위한 서비스

도커 컨테이너 기술을 기반으로 함

ex) Amazon ECS, Google Kubernetes Engine, Microsoft Azure Container Instances

-----

서버리스 컴퓨팅 서비스 : 서버 관리 없이 애플리케이션 코드의 실행에 집중할 수 있는 서비스

필요한 순간에만 코드가 실행됨

ex) AWS Lambda, Google Cloud Functions, Microsoft Azure Functions

-----

네트워킹 서비스 : 가상 네트워크, 로드 밸런서, 방화벽 등 네트워크와 관련된 서비스를 제공

ex) Amazon VPC, Google Cloud Virtual Network, Microfost Azure Virtual Network

-----

인증 및 보안 서비스 : 사용자 인증, 접근 제어, 암호화 등 보안과 관련된 서비스

ex) Amazon [[IAM]], Google Cloud Identity and Access Management, Microsoft Azure Active Directory

-----

데이터 웨어하우스 서비스 : 대규모의 데이터를 저장하고 분석하기 위한 서비스

데이터를 구조화하고 저장하여 실시간 분석, 비즈니스 인텔리전스, 데이터 마이닝 등의 작업에 사용됨

ex) Amazon Redshift, Google BigQuery, Microsoft Azure Synapse Analytics

-----

분석 및 인공지능 서비스 : 데이터 분석, 머신 러닝, 인공지능 관련 서비스

ex) Amazon Athena, Google Cloud BigQuery, Microsoft Azure Machine Learning

----------------------------------------------------------------------------------------------------

aws.amazon.com

정적 웹(=파일서버)
제품 → 스토리지

DB운영
제품 → 데이터베이스

인공지능
제품 → 기계학습 → 인공지능 관련 솔루션들이 나옴

사물을 인터넷으로 연결해서 프로그래밍적으로 제어
제품 → 사물 인터넷

AWS를 사용하게 되면 여러가지 비용들이 발생되는데 그 비용을 관리하는 여러가지 서비스들
제품 → AWS 비용 관리

AWS를 이용하면서 자신이 이용하고 있는 여러가지 서비스들의 사용량, 위험성 등을 측정하려면
재품 → 관리 도구

----------------------------------------------------------------------------------------------------

EC2

인스턴스 = 컴퓨터 1대
컴퓨터 5개가 필요하면 인스턴스를 5개 만들면됨

1. 인스턴스 시작
Linux나 Windows에서 프리티어 사용 가능 되어있는거 선택
키페어 생성
인스턴스 시작

↓↓↓ 여기서부터는 윈도우로 인스턴스 생성한 경우 ↓↓↓

2. 인스턴스에 연결하기
인스턴스 항목에서 우클릭 → 연결
RDP 클라이언트 탭
원격 데스크톱 파일 다운로드(여기에는 인스턴스정보가 담겨있음)

3. 다운로드한 파일을 원격 프로그램에서 열기
Microsoft Remote Desktop 다운
아까 다운받아놨던 인스턴스정보가 담긴 파일 우클릭 → 다음으로 열기 → Microsoft Remote Desktop
그럼 암호를 입력하는 창이 뜸

4. 암호 가져오기
아까 '원격 데스크톱 파일 다운로드' 버튼 있던 페이지에서 '암호 가져오기' 버튼 클릭
프라이빗 키 파일 업로드 버튼 클릭
아까 키페어 생성해서 다운받아놨던 .pem 확장자 파일 선택
암호 해독 버튼 클릭
'암호'라고 써있는 항목의 암호 복사 아이콘 버튼 클릭
아까 원격프로그램에 붙여넣고 → Continue → Continue

-----

끄는법

인스턴스 중지(pending) : 컴퓨터를 끄는것 (비용 감소, 데이터 유지)
인스턴스 종료(terminated) : 컴퓨터를 제거하는것 (비용 발생X, 데이터 삭제)

------------------------------

리눅스 우분투 ssh접속

1. 우분투 인스턴스 생성

2. 키페어에 읽기 권한 축소 (안하면 WARNING: UNPROTECTED PRIVATE KEY FILE! 오류남)
$ chmod 400 [키파일]
ex) $ chmod 400 imchaewon.pem

3. ssh 접속
$ ssh -i [키파일] ubuntu@[퍼블릭 IPv4 주소]

AMI가 ubuntu가 아닌경우 아래에 맞는 이름을 넣으면 됨
Amazon Linux 2023	→	ec2-user
Amazon Linux 2	→	ec2-user
Amazon Linux		→	ec2-user
CentOS			→	centos or ec2-user
Debian			→	admin
Fedora			→	fedora or ec2-user
RHEL			→	ec2-user or root
SUSE			→	ec2-user or root
Ubuntu			→	ubuntu
Oracle			→	ec2-user
Bitnami			→	bitnami
Other			→	Check with the AMI provider

ex) $ ssh -i imchaewon.pem ubuntu@15.165.159.132

처음 접속시 This key is not known by any other names 이런 메시지가 뜰 수 있는데 yes 입력하면됨

-----

웹서버 설치 후 접속

1. 웹 서버 설치(Apache 또는 Nginx)
$ sudo apt update
$ sudo apt install apache2

2. 웹 서버 실행
$ sudo systemctl start apache2
$ sudo ufw allow 80

3. 웹 서버가 정상적으로 실행중인지 확인
$ sudo systemctl status apache2

4. AWS는 ssh를 제외한 나머지것들을 방화벽으로 다 막아놓는데, HTTP 통신방법을 이용해야 하기 때문에 방화벽을 풀어줘야함
인바운드 규칙(외부에서 내부로 접근할때 어떠한 접근을 허용할건지)을 추가해야함
인스턴스 페이지 → 보안 탭 → 보안그룹 클릭 → 인바운드 규칙 탭 → 인바운드 규칙 편집 → 규칙 추가 → 유형에 HTTP 선택 → 내 IP/32 or 0.0.0.0/0 (=Anywhere-IPv4) → 규칙 저장

내 ip가 121.128.126.18 일 경우 121.128.126.18/32 로 하면 됨 이때 /32는 단일 ip를 말함


5. 브라우저에서 접속
http://퍼블릭IP
ex) http://15.165.159.132/

-----

톰캣 설치

1. 톰캣 다운로드
wget -c http://archive.apache.org/dist/tomcat/tomcat-8/v8.5.78/bin/apache-tomcat-8.5.78.tar.gz

2. 압축 해제
tar -zxvf apache-tomcat-8.5.78.tar.gz

3. JDK 설치
$ sudo apt update
$ sudo apt install openjdk-11-jdk

4. 톰캣 실행
$ cd 톰캣폴더/bin
$ ./startup.sh

5. AWS는 ssh를 제외한 나머지것들을 방화벽으로 다 막아놓는데, HTTP 통신방법을 이용해야 하기 때문에 방화벽을 풀어줘야함
인바운드 규칙(외부에서 내부로 접근할때 어떠한 접근을 허용할건지)을 추가해야함
인스턴스 페이지 → 보안 탭 → 보안그룹 클릭 → 인바운드 규칙 탭 → 인바운드 규칙 편집 → 규칙 추가 → 유형에 사용자 지정 TCP 선택 → 
내 IP or 0.0.0.0/0 (=Anywhere-IPv4) → 규칙 저장

6. 톰캣 종료
$ cd 톰캣폴더/bin
$ ./shutdown.sh

----------------------------------------------------------------------------------------------------

ubuntu에 자바 설치

sudo apt-get update
apt search openjdk
sudo apt-get install openjdk-11-jdk


llinux에 자바 설치

sudo yum update
yum list java*
sudo yum install java-11-amazon-corretto.x86_64

----------------------------------------------------------------------------------------------------

AWS [[IAM]] 자격증명 생성하는법

AWS콘솔에 접속 → 우측 상단에 닉네임 클릭 → 보안 자격 증명 클릭 → 엑세스 키 항목에 '엑세스 키 만들기' 클릭 → '액세스 키 만들기' 클릭
엑세스 키 ID : AKIAZQSAPMMEHWSOEMWW
비밀 엑세스 키 : 비밀...


AWS CLI 를 사용하기 위해 자격증명 정보 설정하는법

터미널 접속후 아래 명령어 입력
aws configure
이후 엑세스 키 ID, 비밀 키,  기본 리전 및 출력형식 입력
기본 리전 : ap-northeast-2
출력 형식 : json

----------------------------------------------------------------------------------------------------

S3(Simple Storage Service, 파일 서버, 객체 스토리지 서비스)

EC2 : 컴퓨터를 통째로 빌려주는 서비스. 자유도가 가장 높지만 모든것을 사용자가 알아서 해야함
다른 서비스 : AWS가 알아서 해줌

파일과 메타데이터가 결합된 형태로 데이터를 저장하며 주로 웹 어플리케이션에서 정적 파일(이미지, 동영상, 문서 등)을 저장하고 공유하는 데 사용됨
보통 웹 어플리케이션에서 파일 업로드, 다운로드, CDN에 사용하는 데 적합함
무제한 용량(하나의 객체는 0byte에서 5TB의 용량)

버킷: S3의 저장공간을 구분하는 단위로, 디렉토리와 같은 개념. 버킷명은 전 세계에서 고유한 값을 가져야함

Owner: 소유자
Key: 파일의 이름
Value: 파일의 데이터
Version Id: 파일의 버전 아이디
Metadata: 파일의 정보를 담은 데이터
ACL: 파일의 권한을 담은 데이터
Torrents: 토렌트 공유를 위한 데이터

99.999999999%(eleven 9s) 내구성(파일을 잃어버리지 않는 능력. =안전성,지속성)을 제공 (로또 당첨확률이 S3로 파일을 잃어버릴 확률보다 122배 더 높음)
데이터를 여러개의 가용 영역에 복제하여 저장하므로 하나의 가용 영역에서 장애가 발생하더라도 데이터의 안전성과 지속성을 보장함

99.9% SLA 가용성(내가 원할때 그 파일을 쓸 수 있는 능력)(스토리지 클래스에 따라 다름)
상황에 따라서는 내가 원하는 파일을 내가 원할 때 가져오지 못할 수도 있음

-----

S3 보안

S3의 모든 버킷은 새로 생성 시 기본적으로 Private(비공개)이고, 따로 설정을 통해 불특정 다수에게 공개 가능

보안 설정은 객체 단위와 버킷 단위로 가능
Bucket Policy : 버킷 단위 (잘만 설정하면 파일단위로도 설정할 수 있음)
ACL(Access Control List) : 객체 단위 (거의 잘 안씀)

MFA를 활용해 객체 삭제 방지 가능(실수로 지우거나, 어떤 공격으로 부터 지워지는것을 방지할 수 있음)

Versioning을 통해 파일 관리 가능(삭제되더라도 다시 복구시키거나, 이전 버전으로 되돌리기 가능)

액세스 로그 생성 및 전송 가능(S3 버킷에 어떤 사람이 어떻게 파일을 접근했고 무엇을 했는지에 대해서 로그 생성이 가능하고, 이것을 다른 버킷으로 전송하거나 다른 계정으로 전송 가능)

------------------------------

생성법

서비스 → 스토리지 → S3

'버킷 만들기' 클릭 (버킷: 파일을 담을 그릇)
버킷 이름 입력
public으로 설정(모든 퍼블릭 엑세스 차단 체크 해제)

이후 버켓에 들어가서 파일을 드래그앤드랍으로 업로드 하기

이후 그 항목에 들어가서 객체(파일)에 권한을 공개로 설정하고 (권한 → 편집 → 모든 사람(퍼블릭 액세스) 체크 → 변경 사항 저장)
URL을 복사후 주소창에 붙여넣으면 파일을 전 세계 어느 누구든 확인가능

------------------------------

터미널에서 S3 버킷에 파일 업로드

설치
brew install awscli

설치경로 확인
which aws

버전 확인
aws --version

aws s3 cp 파일명 s3://버킷명
ex) aws s3 cp asdf.txt s3://imchaewon1

이때 Unable to locate credentials 이렇게 뜬다면 AWS자격증명을 구성해야함

자격증명을 하고 다시 업로드 명령을 입력하면 업로드가 끝났다는 메시지가 나오고, AWS콘솔에서 리로드 버튼 클릭시 업로드가 잘 되어있음

------------------------------

s3 목록 확인(자격증명 필요)
aws s3 ls

------------------------------

프로그램으로 업로드하는법

Node.js 프로젝트에서 패키지를 관리하는 도구인 npm또는 yarn으로 sdk 모듈 설치
$ npm install aws-sdk

<s3Upload.js>
// AWS SDK를 로드함
var AWS = require('aws-sdk');

// S3를 로드함
var s3 = new AWS.S3();

// S3로 파일을 업로드함. put=업로드, Object=파일
s3.putObject({
	Bucket: 'imchaewon1',
	Key: 'hello-sdk',
	Body: 'Hello S3'
}, function(){
	// 업로드가 끝난 후에 파일목록을 출력함
	s3.listObjects({Bucket: 'imchaewon1'}, function(arr, data){
		console.log(data);
	})
});

$ node s3Upload.js

잘 실행되었다면 파일목록이 출력된 것을 확인
aws콘솔에서 새고로침버튼 눌러 파일이 잘 생성된 것을 확인하기

----------------------------------------------------------------------------------------------------

RDS(Relational Database Service)

관계형 데이터베이스를 제공하는 AWS의 서비스

서비스 → 데이터베이스 → 데이터베이스 생성 클릭

1. 엔진 유형 선택(MySQL / MariaDB / Oracle / PostgreSQL ...)

2. 템플릿 : 프리 티어 ★★★

3. '마스터 사용자 이름' 입력. 기본값은 admin. (= DB툴에서 '사용자' 란에 입력될 값)

4. '마스터 암호' / '마스터 암호 확인' 입력 (= DB툴에서 '비밀번호' 란에 입력될 값)

4. 퍼블릭 액세스 : '예' 선택

5. 기존 VPC 보안 그룹 : default 제거 후 launch-wizard-1 선택

6. launch-wizard-1 보안그룹에서 인바운드 규칙추가 → 사용자 지정 TCP → 포트 범위: 3306 → 0.0.0.0/0 → 설명: mysql → 규칙 저장

DB생성 완료됐으면 인스턴스 들어가서 정보 확인
엔드포인트 값 (= DB툴에서 '호스트' 란에 입력될 값)

DB정보를 DB툴에 입력 (호스트/포트/사용자/비밀번호)


스프링부트에서 가져오는법 (mysql 기준)

<build.gradle>
implementation 'mysql:mysql-connector-java:8.0.28'

<application.yml>
spring:
  datasource:
    url: jdbc:mysql://database-1.cwi9srgotlqn.ap-northeast-2.rds.amazonaws.com:3306/asdf
    username: admin
    password: qwer1234
    driver-class-name: com.mysql.cj.jdbc.Driver

database(스키마)를 꼭 만들어놓고 포트 뒤에 입력해야함(위 예시에서는 asdf)

db접속툴로 접속해서 database(스키마) 만들기

database(스키마)를 만들지않으면 아래와같은 오류가 남
2023-09-10 14:07:35.892  WARN 55582 --- [    Test worker] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL "
    drop table if exists hibernate_sequence" via JDBC Statement


프로젝트 geadle빌드
./gradlew clean build

이후 scp명령어로 jar/war파일 원격서버에 전송해서 java -jar로 실행(java가 설치되어있어야함. scp명령어 및 자바설치방법은 팁-MacOs.txt 참고)
스프링이 오류없이 잘 실행됐으면 ec2 가서 보안 > 인바운드 규칙에 8080 포트 0.0.0.0/0으로 풀어놓고

브라우저 url창에 [EC2 퍼블릭 IPv4 주소]:8080 입력해서 접속 잘 되는지 접속하기

----------------------------------------------------------------------------------------------------

ELB(Elastic Load Balancer, 로드밸런서)

EC2에서 한대의 컴퓨터의 성능을 개선하는것을 '스케일 업' or '수직 확장' 이라고 부름

그런데 1대의 컴퓨터가 수용할 수 있는 처리량에는 언제나 한계가 있음.
여러대의 컴퓨터로 시스템에 걸리는 트래픽을 분산할수가 있게됨

트래픽이 증가했을때 한대의 컴퓨터로는 그것을 감당할수 없기때문에
여러개의 EC2 인스턴스를 만듦

각각의 인스턴스들은 인터넷의 고유한 Public DNS로 연결이 되어있음
그럼 사용자들에게 각각 다른 URL을 통해서 접속하게 해야하는데, 그렇게 서비스를 할 수 는 없음

트래픽이 도달했을때, 모든 트래픽을 일단을 하나의 단일 진입점이 받아냄.
이때 단일 진입점이라고 하는 시스템이 여러대의 컴퓨터들에게 트래픽을 분산해서 각각의 컴퓨터들이 트래픽을 처리할 수 있도록 하는,
교차로 역할을 하는 것을 로드밸런서 라고 함

아마존에서는 로드밸런서 역할을 하는 서비스를 제공하고 있는데 그게 바로 ELB다

------------------------------

ELB의 특징

트래픽 분산
들어오는 트래픽을 여러 대상 인스턴스 또는 리소스 그룹으로 분산시킴으로써 부하를 공정하게 분산시킴

자동 확장
여러대의 EC2인스턴스에 트래픽을 분산해주는 ELB는 엄청난 트래픽을 혼자서 감당해야한는데, ELB는 그 트래픽들을 혼자서 몸빵할 수 있는 스케일을 가지고 있음.
아마존 웹서비스에서 그 스케일을 관리하기 때문에 아마존 웹서비스가 알아서 늘렸다 줄였다 하기때문에 우리는 ELB의 스케일에 대해서는 신경쓸 필요가 없음

인스턴스의 상태를 자동 감지해서 오류가 있는 시스템은 배제
여러대의 컴퓨터들이 하나의 ELB에 연결되어있는데, 만약 3대의 컴퓨터들중 하나가 장애가 일어났다.
그러면 ELB가 장애가 일어났다는 사실을 감지하고, 나머지 2개의 컴퓨터에게 분산하고 장애가 일어난 컴퓨터는 배제를 시킴. 언제까지? 장애에서 회복될때까지
장애가 회복되면 ELB는 그것을 감지해서 3대의 컴퓨터로 다시 트래픽을 분산해줌

사용자 세션을 특정 인스턴스에 고정
여러사람들이 접속했을때 그중 누군가가 들어오게 되고 ELB를 통해 특정 서버로 접속했을때,
추후 그 사람이 접속했을때는 무조건 이전에 접속했던 서버로 연결시킬수 있음.
각각의 인스턴스들은 그 인스턴스에 접속했던 사용자들을 지속적으로 처리할 수 있게 처리해준다

SSL 암호화 지원

IPv4, IPv6 지원

CloudWatch를 통해서 모니터링 가능

----------------------------------------------------------------------------------------------------

Lambda

Serverless. 관리할 서버가 없다는 뜻으로, 서버 인프라를 구축∙운영∙관리하지 않고도 코드 배포만으로 백엔드 애플리케이션을 구축할 수 있는 아키텍처
그렇기 때문에 서버리스로 개발을 하면 서버 구축이나 운영에 대한 고민 없이, 서비스 자체에 집중할 수 있음

서버리스 기반으로 개발하려면?
ex) 서버리스 기반으로 게시판 API를 만들려면 → AWS Lambda를 쓰면 됨

AWS람다 → 코드로 이루어진 함수를 실행한다. 이때 실행되는 함수를 람다함수라고 함
이런 람다함수는 특정 이벤트가 발생되었을때 실행됨
ex) API가 호출되었을때 람다를 실행할 수 있게끔 연결할 수 있음
ex) S3에 이미지가 업로드되었을때, 해당 이미지의 썸네일을 만들고 싶다면, S3에 파일이 업로드 되었을때 람다를 실행하면 됨

----------------------------------------------------------------------------------------------------

과금 방지법

------------------------------

프리티어 컴퓨팅 서비스

-----

EC2

월별 750시간까지 무료(EC2인스턴스 하나를 풀로 돌려도 남는다고 함)
리전에 따라 Linux / Windows 운영체제의 t2.micro 또는 t3.micro 인스턴스 타입만 프리티어
다만 EC2 하나당 750시간 가동이 기준이라, 만일 EC2 2개를 돌린다면 375시간(15일) 무료가 됨. 만일 3개를 돌리면 250시간(10일) 무료
따라서 프리티어라고 EC2인스턴스를 마구잡이로 만들어 풀로 돌린다면 금방 월별 무료 사용량을 벗어나 과금이 되니 학습이 끝나면 항상 인스턴스를 종료 or 중지 하기

-----

ELB(Elastic Load Balancing)

수신되는 애플리케이션 트래픽을 여러 Amazon EC2 인스턴스에 자동으로 배포해주는 서비스

Classic Load Balancer 및 Application Load Balancer 만 월별 750시간까지 무료
Classic Load Balancer에서 데이터 처리 15GB까지 가능
Application Load Balancer에서 15LCU 사용

-----

Elastic IP

ip주소를 고정으로 사용할 수 있도록 해주는 서비스

프리티어에서 Elastic IP 1개를 무료로 사용 가능
하지만 1개만 사용한다고 해도 ★Elastic IP는 EC2에 연결해두지 않으면 요금이 청구★되니 조심해야 함
또한 EC2에 연결해두었더라도 EC2가 stop되어있는 상태라면 요금이 청구★됨(EIP가 놀고 있는 상테라서)
따라서 Elastic ip를 만들어두고 할당을 하지 않은 상태라면 실행중인 EC2에 할당 혹은 Elastic ip 삭제를 해야함

-----

Lambda

월별 무료 요청 1,000,000건까지 무료
월별 최대 320만 초의 컴퓨팅 시간
거대한 서비스가 아닌 단순히 개인 프로젝트 용도로 사용할때는 프리티어 계정은 그냥 무료라고 생각해도 됨

-----

Lightsail

가상 프라이빗 서버를 간편하게 실행 컴퓨팅, 스토리지 및 네트워킹 등
AWS에서 프로젝트를 빠르게 시작하는 데 필요한 모든 것

30일 무료(월별 750시간)
Linux/Unix 사용 시 3.50USD Lightsail 플랜을 한 달 동안 무료로 사용
Microsoft Windows Server용으로 Lightsail을 사용하는 경우에는 8 USD 플랜을 한 달 동안 무료 사용

------------------------------

프리티어 스토리지 서비스

-----

EBS

EC2 인스턴스용 영구 블록 수준 스토리지 볼륨

총 30GB의 EBS 스토리지 무료 (t2.micro 인스턴스당 최대 8GB까지 무료)
EBS 마그네틱은 2,000,000번 I/O 무료
1GB의 스냅샷 스토리지 무료 (초과된 저장된 스냅샷에 대해서 1GB당 0.05불의 추가비용 부과)

EC2 6개를 생성하고 stop만 해두었다면 6개의 EBS 볼륨은 그대로 남아있게 되는데,
8GB * 6개 = 48GB를 사용하고 있으므로 프리티어 30GB를 초과하게 되어 요금이 발생하게 됨
사용하지 않는 EC2가 있다면 스냅샷을 떠서 백업해주고 stop이 아닌 terminate를 시켜주어 EBS 사용량 초과로 요금이 발생하는것을 막아주기

-----

S3

보안성, 안정성 및 확장성을 갖춘 스토리지

표준 스토리지 5GB까지 무료
GET 요청 20,000건까지 무료
PUT 요청 2,000건 무료

-----

CloudFront

최종 사용자에게 짧은 지연시간과 빠른 데이터 전송 속도로 콘텐츠를 배포하는 웹 서비스

데이터 송신 50GB까지 무료
HTTP 또는 HTTPS 요청 2,000,000건

-----

Glacier

안전하고 안정적인 장기 객체 스토리지

월별 10GB의 Amazon Glacier 데이터 검색이 무료

-----

EFS

간편성과 확장성을 갖춘 Amazon EC2 인스턴스용 공유 파일 스토리지 서비스

파일 시스템 스토리지 5GB 무료
EFS 파일시스템은 기본적으로 버스팅 모드로써 하드와 같이 미리 용량을 정하는 것이 아닌, 데이터를 적재한 만큼 용량이 늘어남
따라서, 5GB의 데이터를 무료로 저장할 수 있음

------------------------------

프리티어 데이터베이스 서비스

-----

RDS

MySQL, PostgreSQL, MariaDB, Oracle BYOL 또는 SQL Server를 위한 관리형 관계형 데이터베이스 서비스

RDS 인스턴스 1개 무료 사용 가능
월별 750시간까지 무료
단, 해당 DB엔진이 db.t2.micro타입만 사용 가능
범용(SSD) 데이터베이스 스토리지 20GB 제한. 만일 10GB를 사용하는 RDS 인스턴스 3개를 생성하면 과금이 되게 된다 (30GB가 되므로)
데이터베이스 백업 및 DB 스냅샷용 스토리지 20GB
RDS 생성할때 오토 백업 안되게 주의
RDS 스토리지 자동 조정 옵션 끄기
Multi-AZ와 고성능 I/O인 Provisioned IOPS Storage를 사용하지 않도록 설정

-----

DynamoDB

원활한 확장성을 제공하는 빠르고 유연한 NoSQL 데이터베이스

스토리지 25GB까지 무료
25개의 프로비저닝된 쓰기 용량 유닛(WCU)
25개의 프로비저닝된 읽기 용량 유닛(RCU)
월별 2억개의 요청을 처리할 수 있는 용량

-----

ElastiCache

클라우드에서 인 메모리 캐시를 더욱 간편하게 배포, 운영 및 조정할 수 있게 해주는 웹서비스

ElastiCache 1개는 무료로 사용
월 750시간까지 무료로 사용가능
단, cache.t2micro 노드 타입만 가능
[Multi-AZ]가 체크해제해야 t2.micro를 선택할 수 있음

-----

Database Migration Service

최소한의 가동 중단으로 데이터베이스를 마이그레이션하는 서비스

월 750시간까지 무료로 사용가능
단, 단일 AZ 그리고 dms.t2.micro 인스턴스 타입만 가능
범용(SSD) 스토리지 50GB 포함

------------------------------

프리티어 분석 서비스

-----

Elasticsearch Service

AWS 클라우드에서 Elasticsearch 클러스터를 손쉽게 배포, 운영 및 조정할 수 있게 해주는 관리형 서비스
단, 단일 AZ t2.small.elasticsearch 인스턴스 타입만 가능
월별 10GB의 EBS스토리지 옵션(마그네틱 또는 범용)

-----

QuickSight

기존 BI 솔루션 대비 1/10 비용의 빠르고 사용이 간편한 클라우드 기반 비즈니스 분석 서비스

SPICE 용량 1GB 사용자 1명 영구 프리티어
SPICE 용량 10GB 처음 2달동안 사용자 4명 무료

-----

Redshift

빠르고 간단하며 비용 효율적인 데이터 웨어하우징

2개월 무료 평가판
2개월 동안 월별 DC2.Large 750시간

-----

Data Pipeline

데이터 기반 워크플로를 조직화 서비스

낮은 빈도 사전 조건 3개
낮은 빈도 활동 5개

-----

Glue

간단하고 유연하며 비용 효율적인 ETL(Extract, Transfer, and Load) 서비스

AWS Glue 데이터 카탈로그에 저장되는 객체 1백만 개까지 무료
매달 AWS Glue 데이터 카탈로그로 수행되는 요청 1백만 건까지 무료

------------------------------

프리티어 개발자 서비스

-----

CodePipeline

빠르고 안정적인 애플리케이션 업데이트를 위한 지속적 전달 서비스

월별 활성 파이프라인 1개까지 무료

-----

CodeCommit

확장성이 뛰어난 관리형 소스 제어 서비스

월별 활성 사용자 5명까지 무료
월별 스토리지 용량 50GB~월
월별 Git 요청 10,000건

-----

CodeBuild

클라우드에서 코드를 빌드하고 테스트하는 완전관리형 빌드 서비스

build.general1.small 컴퓨팅 유형의 월별 빌드 시간 100분까지 무료

------------------------------

SNS

빠르고 유연한 완전관리형 푸시 메시징 서비스

게시 1,000,000건
HTTP/S 전송 100,000건
이메일 전송

-----

CloudWatch

AWS 클라우드 리소스 및 애플리케이션에 대한 모니터링을 제공하는 서비스

사용자 정의 지표 10개 및 경보 10개
API 요청 1백만 개
로그 데이터 수집 5GB 및 로그 데이터 아카이브 5GB
월별 최대 50개의 지표를 제공하는 대시보드 3개

-----

API Gateway

모든 규모의 API를 게시, 유지 관리, 모니터링하고 보호가능 서비스

월별 수신한 API 호출 1백만 건

------------------------------

프리티어 사용량 확인

대시보드 → 결제 → Free tier

------------------------------

프리티어 한도량 알림받기

대시보드 → 결제 → 기본 설정 → 청구서 설정 → 알림 기본설정

'AWS 프리 티어 알림 수신' 체크 후
이메일 입력후 저장

------------------------------

프리티어 초과시 이메일 전송

서비스 → AWS 비용 관리 → AWS Budgets → 예산 생성

'제로 지출 예산' 선택
예산 이름 입력
이메일 수신자에 이메일 입력
'예산 생성' 버튼 클릭

------------------------------

참고: https://inpa.tistory.com/entry/AWS-%F0%9F%92%B0-%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4-%EC%9A%94%EA%B8%88-%ED%8F%AD%ED%83%84-%EB%B0%A9%EC%A7%80-%F0%9F%92%B8-%EB%AC%B4%EB%A3%8C-%EC%82%AC%EC%9A%A9%EB%9F%89-%EC%A0%95%EB%A6%AC#recentEntries

----------------------------------------------------------------------------------------------------











































