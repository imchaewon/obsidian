[[클라우드]] [[모니터링]] 솔루션

- Vista는 [[클라우드]] [[리소스]](VM: CPU, Memory, Network)에 대한 [[모니터링]]이 가능
- 수집되는 데이터는 자원들에 대한 성능정보([[메트릭]]), 자원들에 대한 현황정보(자원중에 얼마나 할당해 줬는지에 대한 정보)
- Vista는, Tuba가 Openstack, VMware, Public SCP 로부터 수집한 각종 데이터를 참조해, 통합하여 실시간 시각화한다

## Vista 구성요소

- Product
- Event
- Log
- [[Agent]]
- Dashboard
- System
- Stream - 정보 큐(Kafka)

위 구성요소들의 정보는 Opensearch 검색 엔진(for Log), RDB(for Metric) 에서 조회가 가능하다

각각의 Log/Metric 은 Agent, Broardcast, API, Exporter, SNMP 에 구축된 파이프라인을 통해 Logs Queue/Metric Queue 로 전송되며 Opensearch/RDB에 저장된다  
이후 수집된 각각의 데이터들을 VISTA Portal에서 가져와 시각화가 가능하다

> 수집 데이터에는 자원들에 대한 성능정보, 자원들에 대한 현황정보(자원중에 얼마나 할당해줬는지에 대한 정보) 가 포함되어 있다
> 
> Logs Queue/Metric Queue에는 Rule Engine, Collect Manager, Global Manager, Log Metric Filter, Delta Process 가 있다

## Vista 기능

- 시각화, 모니터링(대시보드)  
    현재는 Contrabass, Doublebass 에서 시각화가 필요할때, 필요한 곳에서 각자 시각화를 하고있는데, 이를 Vista에서 만든 대시보드를 끌어다 쓰는것이 이상적이다
- 사용자 포탈(모니터링 대상 및 사용자 관리)
- 데이터 서비스(시각화를 위한 200여종의 데이터셋 지원, 실시간 데이터 송출)
- 데이터 가공(데이터 항목 별 파이프라인 구축)
- 데이터 수집

CSP(Cloud Service Provider) 형태로 전환해주기 위한것이 CMP 이다  
CMP는 플랫폼기능만 가져가고 애드온은 솔루션형태로 가는것이 좋다. 각각의 솔루션을 이용해야한다

<font color="#2DC26B">모니터링 - “내가 얼마나 가지고있고, 얼마나 나눠줬고, 얼마나 쓰고있는지" 를 얼마나 편하게 제공해줄 수 있는지</font>

## Vista 데이터 수집

- 에이전트 설치 방식
- 에이전트리스 방식

에이전트리스(하이퍼바이저)보다 에이전트를 선호하는 이유는, 에이전트를 이용할때 훨씬더 다양한 정보를 수집할수있기 때문이다

### 데이터수집 구성요소

- Agent - 모니터링 대상에 설치되어 있는 성능 데이터 및 로그 수집
- Metric Collector - 원격에서 모니터링 대상에 API 등으로 접속하여 성능 데이터 수집
- Data pipeline - 데이터 전처리(precleaning)

전체 수집을 하게되어있는데,

Openstact(Contrabass), VMware(Doublebass)로 나눠져 있다

매트릭컬렉터가 하이퍼바이저에 접근

Public CSP(Cloud Service Provider) 같은 경우에는 퍼블릭 자원에 대한 정보를 땡겨오게 되면 아웃바운드 트래픽이 발생되며 요금이 많이 나온다  
그렇기때문에 자체적으로 제공하는 모니터링 솔루션을 땡겨 오는 방식으로 하는 것이 좋다

오픈스택을 설치하기 위한 장비들은 다른 업체로부터 세팅된다

UMS(통합 메시지 서비스)

## Vista 권한 관리

![[eba9371b-0b38-4f12-a802-9963742052c5.png]]

기능들이 있고, 각 기능의 종류에 따라서 권한을 만들고 권한에 따라서 사용자를 만듦

CMP는 각 솔루션들의 권한을 조회해서 역할을 만들고,

해당 솔루션은 CMP에 권한을 확인해야한다 (지금 이 역할을 가진 사용자가 들어왔는데 이 기능에 접근이 가능한지 여부)

## 기업 내 자원 요청 및 할당 프로세스 (ERP사용 or ERP미사용)

![[32d0482c-9021-4960-8acd-43fad101e012 1.png]]

## 기업 내 자원 요청 및 할당 프로세스 (ERP사용 & CMP사용)

![[e905d748-7d00-4b7f-abda-262014c61a11.png]]


모니터링 관련해서 추가적인 내용은, 컨플루언서의 모니터링정책 페이지를 참고(업데이트 되지 않은 정보들은 아직 추가되지 않은것)

비스타가 추구하는 모니터링 정책은 데이터독 과 유사하다

비스타는 다른 팀에서 만든 모듈을 가져오는것이라 오류가 존재한다

강점이자 약점은 기획

무에서 유를 만드는게 아닌 기존에 있던것을 이용해 서비스를 만드는데, 인프라담당자는 알겠지만, 개발이나 기획자는 이해도가 낮다

정해진시간안에 무언가를 만들어야 하기때문에 기획이 약한 만큼 개발자들이 자신들의 역량을 펼치기가 수월함

기획자가 주는대로 하면 → 코더